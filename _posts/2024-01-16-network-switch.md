---
title: 스위치의 추가 기능
excerpt: VLAN, STP
categories:
  - network
tags:
  - - network
permalink: /network/2024-01-16-network-switch/
toc: true
toc_sticky: true
date: 2024-01-16
last_modified_at: 2024-01-16
published: true
---

> 🌷 **개요**
>
> **스위치**
>
> - 2계층 장비
> - 네트워크의 가장 핵심적인 장비
> - MAC 주소를 기반으로 동작
>
> **스위치의 기본 동작**
>
> - 네트워크 중간에서 패킷을 받아, 필요한 곳에만 보내준다. (네트워크의 통신을 중재)
> - 아무 설정을 하지 않고 연결만 해도 MAC 주소를 기반으로 패킷을 전달한다.
>
> **추가 기능**
>
> - VLAN 기능 : 논리적으로 네트워크를 분리
> - STP 기능 (스패닝 트리 프로토콜) : 네트워크의 루프 방지

# VLAN

## 1. VLAN이란?

- LAN을 `논리적`으로 `분할`하는 기술
- 용도

  - 과도한 브로드캐스트로 인한 단말들의 성능 저하 방지, 보안 향상을 위한 차단 용도
  - 서비스 성격에 따른 정책 분리 적용
  - 각 부서별로 네트워크 분할
  - 단말별로 네트워크 분할

- 주의
  - VLAN 간의 통신은 3계층 장비를 통해서만 가능
    - 서로 다른 네트워크로 분리되기 때문
    - 유니캐스트, 브로드캐스트 모두 3계층을 통해야함

## 2. VLAN의 종류

- 분류 기준: VLAN 할당 방식

### 포트 기반 VLAN (일반적인 방식)

- 스위치의 고정 포트에 VLAN 할당

  - 단말의 위치가 이동하면 다른 포트가 연결되어 VLAN이 변경

### MAC 주소 기반 VLAN

- 스위치에 연결되는 단말의 MAC 주소에 VLAN 할당

  - Dynamic VLAN 이라고도 부른다.
  - 단말에 따라 VLAN 정보가 바뀌기 때문
  - 단말의 위치가 이동하더라도 VLAN이 변경되지 않는다.

## 3. VLAN 모드 동작 방식 (포트 기반 VLAN)

- VLAN의 특징

  - 한 대의 스위치에 연결하더라도 서로 다른 VLAN이 설정된 포트 간에는 통신할 수 없다.

- VLAN별 포트 연결의 문제

  - 하나의 스위치에는 하나의 VLAN이 연결되고, 하나의 VLAN은 하나의 포트를 사용하기 때문에 포트가 낭비 된다.

- 해결

  - `태그` 기능 사용

### 태그 포트 (트렁크 포트)

- `하나의 포트`에 `여러개의 VLAN` 전송
  - 패킷 전송할 때 이더넷 프레임 중간에 VLAN ID 필드를 추가
  - 패킷 수신할 때 VLAN ID 제거

* MAC 주소 테이블에 VLAN ID도 저장

  - VLAN 별로 MAC 주소를 사용할 수 있다.

* 여러 네트워크가 동시에 설정된 `스위치간의 연결`에서 사용

### 언태그 포트 (액세스 포트)

- 하나의 네트워크에 속한 `서버`에 사용

> 가상화 서버는 내부에 가상 스위치가 존재하므로 스위치 간 연결로 볼 수 있다.
>
> ![가상화 서버 연결 구성](https://heon-kim.github.io/assets/images/posts_img/network/2024-01-16-network-switch.jpeg)
